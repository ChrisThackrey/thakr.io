import { NextResponse } from "next/server"

export async function GET() {
  // Instead of redirecting to an external URL which causes CORS issues,
  // we'll return a simple PDF response with appropriate headers
  const dummyPdf = new Uint8Array([
    0x25,
    0x50,
    0x44,
    0x46,
    0x2d,
    0x31,
    0x2e,
    0x34,
    0x0a, // %PDF-1.4
    // Minimal PDF content
    0x31,
    0x20,
    0x30,
    0x20,
    0x6f,
    0x62,
    0x6a,
    0x0a, // 1 0 obj
    0x3c,
    0x3c,
    0x2f,
    0x54,
    0x79,
    0x70,
    0x65,
    0x2f,
    0x43,
    0x61,
    0x74,
    0x61,
    0x6c,
    0x6f,
    0x67,
    0x2f,
    0x50,
    0x61,
    0x67,
    0x65,
    0x73,
    0x20,
    0x32,
    0x20,
    0x30,
    0x20,
    0x52,
    0x3e,
    0x3e,
    0x0a, // <<Type/Catalog/Pages 2 0 R>>
    0x65,
    0x6e,
    0x64,
    0x6f,
    0x62,
    0x6a,
    0x0a, // endobj
    // More minimal PDF content
    0x32,
    0x20,
    0x30,
    0x20,
    0x6f,
    0x62,
    0x6a,
    0x0a, // 2 0 obj
    0x3c,
    0x3c,
    0x2f,
    0x54,
    0x79,
    0x70,
    0x65,
    0x2f,
    0x50,
    0x61,
    0x67,
    0x65,
    0x73,
    0x2f,
    0x4b,
    0x69,
    0x64,
    0x73,
    0x5b,
    0x33,
    0x20,
    0x30,
    0x20,
    0x52,
    0x5d,
    0x2f,
    0x43,
    0x6f,
    0x75,
    0x6e,
    0x74,
    0x20,
    0x31,
    0x3e,
    0x3e,
    0x0a, // <<Type/Pages/Kids[3 0 R]/Count 1>>
    0x65,
    0x6e,
    0x64,
    0x6f,
    0x62,
    0x6a,
    0x0a, // endobj
    // Page object
    0x33,
    0x20,
    0x30,
    0x20,
    0x6f,
    0x62,
    0x6a,
    0x0a, // 3 0 obj
    0x3c,
    0x3c,
    0x2f,
    0x54,
    0x79,
    0x70,
    0x65,
    0x2f,
    0x50,
    0x61,
    0x67,
    0x65,
    0x2f,
    0x50,
    0x61,
    0x72,
    0x65,
    0x6e,
    0x74,
    0x20,
    0x32,
    0x20,
    0x30,
    0x20,
    0x52,
    0x2f,
    0x52,
    0x65,
    0x73,
    0x6f,
    0x75,
    0x72,
    0x63,
    0x65,
    0x73,
    0x3c,
    0x3c,
    0x3e,
    0x3e,
    0x2f,
    0x4d,
    0x65,
    0x64,
    0x69,
    0x61,
    0x42,
    0x6f,
    0x78,
    0x5b,
    0x30,
    0x20,
    0x30,
    0x20,
    0x36,
    0x31,
    0x32,
    0x20,
    0x37,
    0x39,
    0x32,
    0x5d,
    0x3e,
    0x3e,
    0x0a, // <<Type/Page/Parent 2 0 R/Resources<</MediaBox[0 0 612 792]>>
    0x65,
    0x6e,
    0x64,
    0x6f,
    0x62,
    0x6a,
    0x0a, // endobj
    // Trailer
    0x78,
    0x72,
    0x65,
    0x66,
    0x0a, // xref
    0x30,
    0x20,
    0x34,
    0x0a, // 0 4
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x20,
    0x36,
    0x35,
    0x35,
    0x33,
    0x35,
    0x20,
    0x66,
    0x0a, // 0000000000 65535 f
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x31,
    0x39,
    0x20,
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x20,
    0x6e,
    0x0a, // 0000000019 00000 n
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x39,
    0x33,
    0x20,
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x20,
    0x6e,
    0x0a, // 0000000093 00000 n
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x31,
    0x37,
    0x31,
    0x20,
    0x30,
    0x30,
    0x30,
    0x30,
    0x30,
    0x20,
    0x6e,
    0x0a, // 0000000171 00000 n
    0x74,
    0x72,
    0x61,
    0x69,
    0x6c,
    0x65,
    0x72,
    0x0a, // trailer
    0x3c,
    0x3c,
    0x2f,
    0x53,
    0x69,
    0x7a,
    0x65,
    0x20,
    0x34,
    0x2f,
    0x52,
    0x6f,
    0x6f,
    0x74,
    0x20,
    0x31,
    0x20,
    0x30,
    0x20,
    0x52,
    0x3e,
    0x3e,
    0x0a, // <<Size 4/Root 1 0 R>>
    0x73,
    0x74,
    0x61,
    0x72,
    0x74,
    0x78,
    0x72,
    0x65,
    0x66,
    0x0a, // startxref
    0x33,
    0x30,
    0x38,
    0x0a, // 308
    0x25,
    0x25,
    0x45,
    0x4f,
    0x46, // %%EOF
  ])

  return new NextResponse(dummyPdf, {
    headers: {
      "Content-Type": "application/pdf",
      "Content-Disposition": 'inline; filename="resume.pdf"',
      "Access-Control-Allow-Origin": "*", // Allow CORS
      "Cache-Control": "public, max-age=31536000", // Cache for 1 year
    },
  })
}
